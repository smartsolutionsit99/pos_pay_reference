<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="PaymentInfoWidget">
        <div class='modal-dialog'>
            <div class='popup popup-paymentrefinfo'>
                <p class='title'>Please enter Payment Reference</p>
                <div class='paymentrefinfo-detail'>
                    <span class='label' style='color:black'>Payment Reference</span>
                    <input class='detail' name='payment_ref' t-att-value='widget.options.payment_ref' placeholder='Payment Ref'></input>
                </div>
                <div class='footer'>
                    <div class='button confirm'>
                        Confirm
                    </div>
                    <div class='button cancel'>
                        Cancel
                    </div>
                </div>
            </div>
        </div>
    </t>

    <t t-extend="PaymentScreen-Paymentlines">
        <t t-jquery="[t-if='paymentlines.length']"  t-operation="replace">
            <t t-if="paymentlines.length">
                <table class='paymentlines'>
                    <colgroup>
                        <col class='due' />
                        <col class='tendered' />
                        <col class='change' />
                        <col class='method' />
                        <col class='reference' />
                        <col class='controls' />
                    </colgroup>
                    <thead>
                        <tr class='label'>
                            <th>Due</th>
                            <th>Tendered</th>
                            <th>Change</th>
                            <th>Method</th>
                            <th>Reference</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-foreach='paymentlines' t-as='line'>
                            <t t-if='line.selected'>
                                <tr class='paymentline selected'>
                                    <td class='col-due'> <t t-esc='widget.format_currency_no_symbol(order.get_due(line))' /> </td>
                                    <t t-if="line &amp;&amp; line.payment_status &amp;&amp; ['done', 'waitingCard', 'waiting', 'reversing', 'reversed'].includes(line.payment_status)">
                                        <td class='col-tendered'>
                                            <t t-esc='widget.format_currency_no_symbol(line.get_amount())' />
                                        </td>
                                    </t>
                                    <t t-else="">
                                        <td class='col-tendered edit'>
                                            <t t-esc='widget.inputbuffer' />
                                        </td>
                                    </t>
                                    <t t-if='order.get_change(line)'>
                                        <td class='col-change highlight' >
                                            <t t-esc='widget.format_currency_no_symbol(order.get_change(line))' />
                                        </td>
                                    </t>
                                    <t t-if='!order.get_change(line)'>
                                        <td class='col-change' ></td>
                                    </t>

                                    <td class='col-name' > <t t-esc='line.name' /> </td>
                                    <!--                                    add reference-->
                                    <td class='col-ref' t-esc="line.payment_ref">
                                    </td>
                                    <!--                                    -->
                                    <t t-if="line &amp;&amp; line.payment_status &amp;&amp; ['done', 'reversed', 'reversing'].includes(line.payment_status)">
                                        <td/>
                                    </t>
                                    <t t-else=''>
                                        <td class='delete-button' t-att-data-cid='line.cid' aria-label="Delete" title="Delete">
                                            <i class='fa fa-times-circle'/>
                                        </td>
                                    </t>

                                    <t t-if="line &amp;&amp; line.payment_status">
                                        <t t-call="PaymentScreenElectronicPayment"/>
                                    </t>
                                </tr>
                            </t>
                            <t t-if='!line.selected'>
                                <tr class='paymentline' t-att-data-cid='line.cid'>
                                    <td class='col-due'> <t t-esc='widget.format_currency_no_symbol(order.get_due(line))' /> </td>
                                    <td class='col-tendered'> <t t-esc='widget.format_currency_no_symbol(line.get_amount())' /> </td>
                                    <td class='col-change'>
                                        <t t-if='order.get_change(line)'>
                                            <t t-esc='widget.format_currency_no_symbol(order.get_change(line))' />
                                         </t>
                                    </td>
                                    <td class='col-name'> <t t-esc='line.name' /> </td>
                                    <!--                                    add reference-->
                                    <td class='col-ref' t-esc="line.payment_ref">

                                    </td>
                                    <!--                                    -->
                                    <t t-if="line &amp;&amp; line.payment_status &amp;&amp; ['done', 'reversed', 'reversing'].includes(line.payment_status)">
                                        <td/>
                                    </t>
                                    <t t-else=''>
                                        <td class='delete-button' t-att-data-cid='line.cid' aria-label="Delete" title="Delete">
                                            <i class='fa fa-times-circle'/>
                                        </td>
                                    </t>
                                </tr>
                            </t>
                        </t>
                        <t t-if='extradue'>
                            <tr class='paymentline extra' t-att-data-cid='0'>
                                <td class='col-due'> <t t-esc='widget.format_currency_no_symbol(extradue)' /> </td>
                            </tr>
                        </t>
                    </tbody>
                </table>
            </t>
        </t>
    </t>

    <!-- Hide Discount Button Numpad-->
    <t t-extend="NumpadWidget">
        <t t-jquery="div.numpad" t-operation="replace">
            <div class="numpad">
                <button class="input-button number-char">1</button>
                <button class="input-button number-char">2</button>
                <button class="input-button number-char">3</button>
                <button class="mode-button" data-mode='quantity'>Qty</button>
            <br />
                <button class="input-button number-char">4</button>
                <button class="input-button number-char">5</button>
                <button class="input-button number-char">6</button>
                <button class="mode-button" data-mode='price'>Price</button>
            <br />
                <button class="input-button number-char">7</button>
                <button class="input-button number-char">8</button>
                <button class="input-button number-char">9</button>
                <button class="input-button numpad-backspace">
                    <img style="pointer-events: none;" src="/point_of_sale/static/src/img/backspace.png" width="24" height="21" alt="Backspace"/>
                </button>
            <br />
                <button class="input-button numpad-minus" >+/-</button>
                <button class="input-button number-char">0</button>
                <button class="input-button number-char">.</button>

        </div>
        </t>
    </t>

</templates>
